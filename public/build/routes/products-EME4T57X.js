import{a as g}from"/build/_shared/chunk-7MZJJH37.js";import{b as l}from"/build/_shared/chunk-LWBMBOK4.js";import{a as _,e as N,f as a}from"/build/_shared/chunk-4P2AEKIR.js";import{a as x,b as h}from"/build/_shared/chunk-BRYEQANA.js";import{a as p,e as b,f}from"/build/_shared/chunk-IHFEL2CD.js";import{J as y,a as $,y as m}from"/build/_shared/chunk-XTGBAL5E.js";import{e as i}from"/build/_shared/chunk-ADMCF34Z.js";var D=i(x());var o=i($());var t=i(y()),I=()=>[{title:`${h} - Products`}];function w(){let{products:d,brands:C,types:A,models:M}=b(),e=f(),s=m(),[v,E]=(0,o.useState)(0),[T,n]=(0,o.useState)(!1),[u,c]=(0,o.useState)(!1);return(0,o.useEffect)(()=>{e&&(e.productCreated&&c(!1),e.productDeleted&&n(!1))},[e]),(0,o.useEffect)(()=>{e&&(e.productCreated&&c(!1),e.productDeleted&&n(!1))},[e]),(0,t.jsxs)("div",{className:_,children:[d&&d.length?(0,t.jsxs)("table",{className:"table static",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"hidden md:table-row",children:[(0,t.jsx)("th",{children:"ID"}),(0,t.jsx)("th",{children:"Brand"}),(0,t.jsx)("th",{children:"Type"}),(0,t.jsx)("th",{children:"Model"}),(0,t.jsx)("th",{children:"Price"}),(0,t.jsx)("th",{className:"md:text-right",children:"Actions"})]})}),(0,t.jsx)("tbody",{children:d&&d.map(r=>(0,t.jsxs)("tr",{className:N,children:[(0,t.jsx)("td",{"data-label":"ID",className:a,children:r.product_id}),(0,t.jsx)("td",{"data-label":"Brand",className:a,children:r.brand.brand_name}),(0,t.jsx)("td",{"data-label":"Type",className:a,children:r.type.type_name}),(0,t.jsx)("td",{"data-label":"Model",className:a,children:r.model.model_name}),(0,t.jsxs)("td",{"data-label":"Price",className:a,children:["\xA3",r.price]}),(0,t.jsx)("td",{"data-label":"Actions",className:`${a} md:text-right`,children:(0,t.jsx)("button",{className:"btn",onClick:()=>{E(r.product_id),n(!0)},children:"DELETE"})})]},r.product_id))})]}):(0,t.jsx)("p",{className:"text-center",children:"No products found..."}),(0,t.jsx)("div",{className:"flex justify-end mt-4",children:(0,t.jsx)("button",{className:"btn",onClick:()=>{c(!0)},children:"Add new product +"})}),(0,t.jsxs)(l,{open:u,children:[(0,t.jsx)("h3",{className:"mb-4",children:"Create new product"}),u&&(0,t.jsx)(g,{actionName:"create",selectData:{brands:C,types:A,models:M},navigation:s,formErrors:e==null?void 0:e.createActionErrors,onCancel:()=>{c(!1),e&&(e.createActionErrors={})}})]}),(0,t.jsxs)(l,{open:T,children:[(0,t.jsxs)("p",{className:"py-4",children:["Are you sure you want to delete this product?",(0,t.jsx)("br",{}),"NOTE: this doesn't delete the associated brand, model and type"]}),(0,t.jsxs)("div",{className:"modal-action",children:[(0,t.jsxs)(p,{replace:!0,method:"post",children:[(0,t.jsx)("input",{type:"hidden",name:"product_id",value:v}),(0,t.jsx)("button",{className:"btn",type:"submit",name:"_action",value:"delete",disabled:s.state==="submitting",children:s.state==="submitting"?"Confirming...":"Confirm"})]}),(0,t.jsx)("button",{className:"btn",disabled:s.state==="submitting",onClick:()=>n(!1),children:"Cancel"})]})]})]})}export{w as default,I as meta};
